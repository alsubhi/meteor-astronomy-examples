<head>
  <title>Astronomy</title>
</head>

<body></body>

<template name="Users">
  <div id="container">
    <h1>List of users</h1>
    <button type="button" name="add">Add new user</button>
    {{#each users}}
      {{> User}}
    {{/each}}
  </div>
</template>

<template name="User">
  <div class="user">
    <h2>
      <a href="{{pathFor route='edit' data=this.get}}">{{fullName}}</a>
      <span class="remove">&#x2716;</span>
    </h2>
    <div class="details">
      <div>E-mail: <a href="mailto:{{email}}">{{email}}</a></div>
      <div>Age: {{age}}</div>
      <div>Created: {{createdAt.toLocaleString}}</div>
      {{#if updatedAt}}
        <div>Update: {{updatedAt.toLocaleString}}</div>
      {{/if}}
    </div>
  </div>
</template>

<template name="Edit">
  <div id="container">
    {{#with user}}
      <h1>Edit "{{fullName}}"</h1>
      {{> Form}}
    {{/with}}
  </div>
</template>

<template name="Add">
  <div id="container">
    {{#with user}}
      <h1>Add a new user</h1>
      {{> Form}}
    {{/with}}
  </div>
</template>

<template name="Form">
  <div>
    <label for="firstName">First name</label>
    <input id="firstName" type="text" value="{{firstName}}" class="{{#if hasValidationError 'firstName'}}error{{/if}}" />
  </div>
  {{#if hasValidationError 'firstName'}}
    <div class="error">{{getValidationError 'firstName'}}</div>
  {{/if}}

  <div>
    <label for="lastName">Last name</label>
    <input id="lastName" type="text" value="{{lastName}}" class="{{#if hasValidationError 'lastName'}}error{{/if}}" />
  </div>
  {{#if hasValidationError 'lastName'}}
    <div class="error">{{getValidationError 'lastName'}}</div>
  {{/if}}

  <div>
    <label for="email">E-mail</label>
    <input id="email" type="text" value="{{email}}" class="{{#if hasValidationError 'email'}}error{{/if}}" />
  </div>
  {{#if hasValidationError 'email'}}
    <div class="error">{{getValidationError 'email'}}</div>
  {{/if}}

  <div>
    <label for="age">Age</label>
    <input id="age" type="number" value="{{age}}" class="{{#if hasValidationError 'age'}}error{{/if}}" />
  </div>
  {{#if hasValidationError 'age'}}
    <div class="error">{{getValidationError 'age'}}</div>
  {{/if}}

  <label>Addresses</label>
  {{#if hasValidationError 'addresses'}}
    <div class="error">{{getValidationError 'addresses'}}</div>
  {{/if}}
  {{#if hasValidationError 'addresses.$'}}
    <div class="error">{{getValidationError 'addresses.$'}}</div>
  {{/if}}

  <div>
    <label for="addresses.0.city">City</label>
    <input id="addresses.0.city" type="text" value="{{addresses.[0].city}}" class="{{#if hasValidationError 'addresses.0.city'}}error{{/if}}" />
  </div>
  {{#if hasValidationError 'addresses.0.city'}}
    <div class="error">{{getValidationError 'addresses.0.city'}}</div>
  {{/if}}

  <div>
    <label for="addresses.0.state">State</label>
    <input id="addresses.0.state" type="text" value="{{addresses.[0].state}}" class="{{#if hasValidationError 'addresses.0.state'}}error{{/if}}" />
  </div>
  {{#if hasValidationError 'addresses.0.state'}}
    <div class="error">{{getValidationError 'addresses.0.state'}}</div>
  {{/if}}

  <button type="button" name="save">Save</button>
</template>
